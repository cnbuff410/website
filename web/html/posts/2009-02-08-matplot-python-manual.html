<div class="document" id="matplot-python">
<h1 class="title">Matplot-python用法速查</h1>
<div class="section" id="matplot">
<h1>典型的Matplot例子：</h1>
<pre class="code python literal-block">
<span class="keyword namespace">import</span> <span class="name namespace">numpy</span> <span class="keyword namespace">as</span> <span class="name namespace">np</span>
<span class="keyword namespace">import</span> <span class="name namespace">matplotlib.pyplot</span> <span class="keyword namespace">as</span> <span class="name namespace">plt</span>

<span class="keyword">def</span> <span class="name function">f</span><span class="punctuation">(</span><span class="name">t</span><span class="punctuation">):</span>
    <span class="keyword">return</span> <span class="name">np</span><span class="operator">.</span><span class="name">exp</span><span class="punctuation">(</span><span class="operator">-</span><span class="name">t</span><span class="punctuation">)</span> <span class="operator">*</span> <span class="name">np</span><span class="operator">.</span><span class="name">cos</span><span class="punctuation">(</span><span class="literal number integer">2</span> <span class="operator">*</span> <span class="name">np</span><span class="operator">.</span><span class="name">pi</span> <span class="operator">*</span> <span class="name">t</span><span class="punctuation">)</span>

<span class="name">t1</span> <span class="operator">=</span> <span class="name">np</span><span class="operator">.</span><span class="name">arange</span><span class="punctuation">(</span><span class="literal number float">0.0</span><span class="punctuation">,</span> <span class="literal number float">5.0</span><span class="punctuation">,</span> <span class="literal number float">0.1</span><span class="punctuation">)</span>
<span class="name">t2</span> <span class="operator">=</span> <span class="name">np</span><span class="operator">.</span><span class="name">arange</span><span class="punctuation">(</span><span class="literal number float">0.0</span><span class="punctuation">,</span> <span class="literal number float">5.0</span><span class="punctuation">,</span> <span class="literal number float">0.02</span><span class="punctuation">)</span>

<span class="name">plt</span><span class="operator">.</span><span class="name">figure</span><span class="punctuation">(</span><span class="literal number integer">1</span><span class="punctuation">)</span>
<span class="name">plt</span><span class="operator">.</span><span class="name">subplot</span><span class="punctuation">(</span><span class="literal number integer">211</span><span class="punctuation">)</span>
<span class="name">plt</span><span class="operator">.</span><span class="name">plot</span><span class="punctuation">(</span><span class="name">t1</span><span class="punctuation">,</span> <span class="name">f</span><span class="punctuation">(</span><span class="name">t1</span><span class="punctuation">),</span> <span class="literal string">'bo'</span><span class="punctuation">,</span> <span class="name">t2</span><span class="punctuation">,</span> <span class="name">f</span><span class="punctuation">(</span><span class="name">t2</span><span class="punctuation">),</span> <span class="literal string">'k'</span><span class="punctuation">)</span>
<span class="name">plt</span><span class="operator">.</span><span class="name">subplot</span><span class="punctuation">(</span><span class="literal number integer">212</span><span class="punctuation">)</span>
<span class="name">plt</span><span class="operator">.</span><span class="name">plot</span><span class="punctuation">(</span><span class="name">t2</span><span class="punctuation">,</span> <span class="name">np</span><span class="operator">.</span><span class="name">cos</span><span class="punctuation">(</span><span class="literal number integer">2</span> <span class="operator">*</span> <span class="name">np</span><span class="operator">.</span><span class="name">pi</span> <span class="operator">*</span> <span class="name">t2</span><span class="punctuation">),</span> <span class="error">‘</span><span class="name">r</span><span class="error">–’</span><span class="punctuation">)</span>
</pre>
</div>
<div class="section" id="id1">
<h1>题目，坐标轴设置</h1>
<p>最简单的就是通过title，xlabel和ylabel设置，比如:</p>
<pre class="literal-block">
xlabel(&quot;xxxx&quot;, fontsize=18, color=&quot;red&quot;)
</pre>
<p>这里title是某个axis的title，如果希望整个figure有title，那么需要用suptitle() 函数，用法和title是一样的。
x和y轴的范围设定是通过:</p>
<pre class="literal-block">
plt.axis([0, 6, 0, 20])
</pre>
<p>这就是表示x轴是0到6，y轴是0到20。也可以用xlim和ylim单独控制，比如:</p>
<pre class="literal-block">
ylim( ymin, ymax )
</pre>
<p>当然还可以用yscale和xscale指定坐标轴的scale类型，分别是‘linear’ | ‘log’ | ‘symlog’，比如:</p>
<pre class="literal-block">
xscale(&quot;log&quot;)
</pre>
<p>还可以通过yaxis.grid和xaxis.grid控制怎么显示网格，是否显示网格。grid的函数是这样的:</p>
<pre class="literal-block">
grid(self, b=None, which='major', **kwargs)
</pre>
<p>如果用yaxis.grid (false)，就表示不用显示y轴方向的网格。</p>
<p>有时候我们需要在坐标轴上放文字，比如在x轴上放置月份名称之类，这就需要xticks函数。其用法是比如:</p>
<pre class="literal-block">
xticks( arange(5), ('Tom', 'Dick', 'Harry', 'Sally', 'Sue') )
</pre>
<p>这里，第一个参数表示放置位置，第二个是放置内容。</p>
<p>设置曲线特征:</p>
<pre class="literal-block">
lines = plt.plot(x1, y1, x2, y2)
# use keyword args
plt.setp(lines, color='r', linewidth=2.0)
# or matlab style string value pairs
plt.setp(lines, 'color', 'r', 'linewidth', 2.0)
</pre>
<p>如果希望知道有哪些属性可以指定，可以传递对象给setp()函数，比如:</p>
<pre class="literal-block">
lines = plt.plot([1,2,3])
plt.setp(lines)
</pre>
<p>具体能控制的属性参见
<a class="reference external" href="http://matplotlib.sourceforge.net/users/pyplot_tutorial.html">pyploy tutorial</a>.</p>
<p>文字处理text()命令可以被用来放置文字在绝对坐标轴上，用法是:</p>
<pre class="literal-block">
text(60, .025, r'$\mu=100,\ \sigma=15$', horizontalalignment='left', verticalalignment='top')
</pre>
<p>放置的东西前面加个r表示包括数学公式。具体能控制的属性可以参见
<a class="reference external" href="http://matplotlib.sourceforge.net/users/text_props.html#text-properties">属性列表</a>. 具体的数
学公式和符号的表达方式参见
<a class="reference external" href="http://matplotlib.sourceforge.net/users/mathtext.html">mathtext</a>.</p>
<p>这只是放置文字，还有一种需求是要求放置文字标注, 这时候就要用到anotate()函数了，用法大概是这样的:</p>
<pre class="literal-block">
plt.annotate('local max', xy=(2, 1), xytext=(3, 1.5), arrowprops=dict(facecolor='black', shrink=0.05))
</pre>
<p>第一个参数是要放置的文字，第二个参数是要指向的坐标，第三个是放置文字的坐标，最后一个是箭头属性。相关属性设置参见
<a class="reference external" href="http://matplotlib.sourceforge.net/users/annotations.html#annotations-tutorial">这里</a>.</p>
<p>对于经常写公式的人来讲，可能latex的格式会感觉更加常用一点。这时候，可以在放置text之前先用:</p>
<pre class="literal-block">
rc('text', usetex=True)
</pre>
<p>然后与文字有关的地方都用r”&quot;来引用，比如:</p>
<pre class="literal-block">
title(r&quot;\TeX\ is Number $\displaystyle\sum_{n=1}^\infty\frac{-e^{i\pi}}{2^n}$!&quot;, fontsize=16, color='r')
</pre>
</div>
<div class="section" id="id4">
<h1>画函数</h1>
<p>plt.plot最简单的形式就是take一组列表数据:</p>
<pre class="literal-block">
plt.plot([1,2,3])
</pre>
<p>此时plot自动将其认为是y轴的数据，x轴数据自动分配，相当于是:</p>
<pre class="literal-block">
plt.plot([0,1,2],[1,2,3])
</pre>
<p>也就是说，对于plot，标准形式是:</p>
<pre class="literal-block">
plt.plot([1,2,3,4], [1,4,9,16])
</pre>
<p>当然，后面可以跟控制表示形式的参数，比如:</p>
<pre class="literal-block">
plt.plot([1,2,3,4], [1,4,9,16], 'ro')
</pre>
<p>就表示用红色点表示，而不是直线。参数默认是’b-’，表示蓝色直线。</p>
<p>plot还支持同时在一张图里面绘制多个图形，比如:</p>
<pre class="literal-block">
import matplotlib.pyplot as plt
plt.plot(x1, y1, 'r--', x2, y2, 'bs', x3, y3, 'g^')
</pre>
<p>就可以用不同的形式绘制三条曲线。</p>
</div>
<div class="section" id="id5">
<h1>画子图</h1>
<p>用plt.subplot(xxx)，第一个数字表示numrows，第二个表示numcols，第三个表示fignum。fignum的数量最高也就是numrows乘以numcols。
如果是想产生多个图，每个图包含几个子图，那用figure()来控制图的数量。</p>
</div>
<div class="section" id="id6">
<h1>画直方图</h1>
<p>用函数:</p>
<pre class="literal-block">
hist(x, bins=10, range=None, normed=False, cumulative=False, bottom=None, histtype='bar', align='mid', orientation='vertical', rwidth=None, log=False, **kwargs)
</pre>
<p>具体用法参考
<a class="reference external" href="http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.hist">hist</a>.</p>
</div>
<div class="section" id="id7">
<h1>画分布图</h1>
<dl class="docutils">
<dt>例子::</dt>
<dd>scatter(x, y, s=20, c='b', marker='o', cmap=None, norm=None, vmin=None, vmax=None, alpha=1.0, linewidths=None, verts=None,**kwargs )</dd>
</dl>
<p>具体参数看
<a class="reference external" href="http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter">scatter</a> ，唯一一个不是很确定的是s的取值，我曾经估计是s值要和x和y的列表长
度一样，也就是大概是点的个数？但具体画的时候发现不是这样，点的个数取决于x和y的
列表长度。有待研究。</p>
</div>
<div class="section" id="box-plot">
<h1>画Box Plot图</h1>
<p>用matplot画Box Plot不知道有多方便，直接用函数:</p>
<pre class="literal-block">
boxplot(x, notch=0, sym='+', vert=1, whis=1.5, positions=None, widths=None)
</pre>
<p>你直接把一组数用x送进去，出来就是Box图。如果你想一个图表示多个Box，也很简单，让xappend多个list，出来的就是这些list的box图。一个例子如下:</p>
<pre class="literal-block">
for attribute in iris[type].keys():
    list = iris[type][attribute]
    data.append(list)
    subplot(2,2,count)
title(&quot;Boxplot of %s&quot; % type, fontsize=18, color=&quot;red&quot;)
xticks(arange(5),(&quot;&quot;,&quot;Sepal len&quot;,&quot;Sepal wid&quot;,&quot;Petal len&quot;,&quot;Petal wid&quot;))
ylabel(&quot;Value&quot;)
boxplot(data,0,'gd')
</pre>
</div>
<div class="section" id="id8">
<h1>画幂函数图</h1>
<p>例子:</p>
<pre class="literal-block">
from matplotlib.matlab import *

x = linspace(-4, 4, 200)
f1 = power(10, x)
f2 = power(e, x)
f3 = power(2, x)

plot(x, f1, 'r', x, f2, 'b', x, f3, 'g', linewidth=2)
axis([-4, 4, -0.5, 8])
text(1, 7.5, r'$10^x$', fontsize=16)
text(2.2, 7.5, r'$e^x$', fontsize=16)
text(3.2, 7.5, r'$2^x$', fonsize=16)
title('A simple example', fontsize=16)

savefig('power.png', dpi=75)
show()
</pre>
</div>
<div class="section" id="id9">
<h1>显示图形中的数学公式</h1>
<p>Matplotlib 可以支持一部分 TeX 的排版指令，因此用户在绘制含有数学公式的图形时会感到很方便并且可以得到比较满意的显示效果，所需要的仅仅是一些 TeX 的排版知识。下面的这个例子显示了如何在图形的不同位置上, 如坐标轴标签，图形的标题以及图形中适当的位置处，显示数学公式。相应的 Python 程序如下:</p>
<pre class="literal-block">
from matplotlib.matlab import *

def f(x, c):
    m1 = sin(2*pi*x)
    m2 = exp(-c*x)
    return multiply(m1, m2)

x = linspace(0, 4, 100)
sigma = 0.5
plot(x, f(x, sigma), 'r', linewidth=2)
xlabel(r'$\rm{time} \ t$', fontsize=16)
ylabel(r'$\rm{Amplitude} \ f(x)$', fontsize=16)
title(r'$f(x) \ \rm{is \ damping \ with} \ x$', fontsize=16)
text(2.0, 0.5, r'$f(x) = \rm{sin}(2 \pi x^2) e^{\sigma x}$', fontsize=20)
savefig('latex.png', dpi=75)
show()
</pre>
</div>
</div>
